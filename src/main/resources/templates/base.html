<!DOCTYPE html>
<html lang="en" data-th-lang="${#locale.language}">
<head data-th-fragment="header">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title data-th-text="#{app.title}">TrainTracker</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/webjars/org.webjars.npm/bootstrap/5.2.0/dist/css/bootstrap.min.css" data-th-href="@{/assets/bootstrap/dist/css/bootstrap.min.css}"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/webjars/org.webjars.npm/flag-icons/6.6.4/css/flag-icons.min.css" data-th-href="@{/assets/flag-icons/css/flag-icons.min.css}"/>
	<style>
		main > .container {
			padding: 30px 15px 0;
		}
		.carrier-logo {
			height: 30px;
		}
	</style>
	<link rel="icon" href="/favicon.ico" data-th-href="@{/favicon.ico}">
</head>
<body data-th-fragment="body(report)">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	<div class="container">
		<a class="navbar-brand" href="/" data-th-href="@{'/web/' + ${carrier.id}}" data-th-text="#{navbar.title}">TrainTracker</a>
		<a class="nav-item navbar-link me-auto" href="#" data-bs-toggle="modal" data-bs-target="#carrier">
			<img src="https://prodaja.hzpp.hr/Content/img/HZPP_logo_color_small.png" class="img-thumbnail carrier-logo" alt="hzpp" data-th-src="${carrier.logo}"/>
		</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav ms-auto">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-th-text="#{navbar.language}">Language</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="#" data-th-href="@{''(locale=en)}">
							<span class="fi fi-gb"></span> English
						</a>
						<a class="dropdown-item" href="#" data-th-href="@{''(locale=hr)}">
							<span class="fi fi-hr"></span> Hrvatski
						</a>
					</div>
				</li>
			</ul>
		</div>
	</div>
</nav>

<main>
	<div class="container">
		<form class="row" id="search-form" hx-target="#train-data" data-th-attr="hx-get=@{'/web/' + ${carrier.id} + '/voyages'}">
			<label class="visually-hidden" for="train-no-input" data-th-text="#{search.trainNo}">Train number</label>
			<div class="input-group input-group-lg">
				<input type="text" name="voyage-id" class="form-control" id="train-no-input" placeholder="Train number" size="10" autofocus data-th-placeholder="#{search.trainNo}" data-th-value="${voyageId}"/>
				<button type="submit" class="btn btn-primary" id="submit-button" disabled>
					<span class="spinner-border spinner-border-sm htmx-indicator" role="status" aria-hidden="true"></span>
					<span data-th-text="#{search.submit}">Search</span>
				</button>
			</div>
		</form>
	</div>
</main>

<div class="container" id="train-data">
	<div data-th-replace="${report}"></div>
</div>

<div class="modal fade" id="carrier" tabindex="-1" role="dialog" aria-labelledby="header-carrier">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="header-carrier" data-th-text="#{carrier.title}">Carrier</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body d-grid gap-2">
				<a class="btn btn-outline-primary btn-lg btn-block" href="#" role="button" data-th-each="carrier : ${carriers}" data-th-href="@{'/web/' + ${carrier.id}}">
					<img src="https://prodaja.hzpp.hr/Content/img/HZPP_logo_color_small.png" class="img-thumbnail carrier-logo" alt="hzpp" data-th-src="${carrier.logo}"/>
					<span data-th-text="#{'carrier.' + ${carrier.id}}">HZPP</span>
				</a>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="shortcuts" tabindex="-1" role="dialog" aria-labelledby="header-shortcuts">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="header-shortcuts" data-th-text="#{shortcuts.title}">Shortcuts</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-2 text-end"><kbd>/</kbd></div>
					<div class="col-md-6" data-th-text="#{shortcuts.focusSearch}">Focus search input</div>
				</div>
				<div class="row">
					<div class="col-md-2 text-end"><kbd>c</kbd></div>
					<div class="col-md-6" data-th-text="#{shortcuts.carrierSelector}">Show carrier selector</div>
				</div>
				<div class="row">
					<div class="col-md-2 text-end"><kbd>?</kbd></div>
					<div class="col-md-6" data-th-text="#{shortcuts.show}">Show shortcuts</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/webjars/org.webjars.npm/htmx.org/1.8.0/dist/htmx.min.js" data-th-src="@{/assets/htmx.org/dist/htmx.min.js}"></script>
<script src="https://cdn.jsdelivr.net/webjars/org.webjars.npm/bootstrap/5.2.0/dist/js/bootstrap.bundle.min.js" data-th-src="@{/assets/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
<script src="https://cdn.jsdelivr.net/webjars/org.webjars.npm/mousetrap/1.6.5/mousetrap.min.js" data-th-src="@{/assets/mousetrap/mousetrap.min.js}"></script>
<script src="https://cdn.jsdelivr.net/webjars/org.webjars.npm/mousetrap/1.6.5/plugins/global-bind/mousetrap-global-bind.min.js" data-th-src="@{/assets/mousetrap/plugins/global-bind/mousetrap-global-bind.min.js}"></script>
<script src="/app.js" data-th-src="@{/app.js}"></script>
</body>
</html>
